## APPJS 项目入口文件

***

项目重点：登录逻辑，页面跳转逻辑，请求通信逻辑
登录逻辑相关：

       1.需要登录权限页面操作如下：

              初始化获取当前登录状态   appConf.isUserLogin()  --appConf全局注入
              未登录：通过  NativeInterface.goToLoginPage()跳转到登录页 
              已登陆：走正常流程
              需要添加DeviceEventEmitter监听初始化
              页面销毁需要移除事件监听


页面跳转逻辑：

       1.一种是rn的路由跳转模式 Actions.xxx()
       2.app的跳转 通过 NativeInterface `app\lib\nativeInterface\NativeInterface.js`定制抛出了API 是在nativeModules.YMShopSDK的基础上进行定制的
       3.WidgetActionMapper： 
        (1)在RouterMapper基础上封装的类，通过调用RouterMapper的jump方法来实现页面跳转； 
        (2)并非两个独立的路由控制器；



请求通信封装：
       1.native_modules\react-native-ym-http\src\RequestUtils.js
       2.native_modules\react-native-ym-http\src\HttpUtils.js  
       3.native_modules\react-native-ym-http\src\handler\HttpRetryer.js  ==》重连
       4.native_modules\react-native-ym-http\src\handler\HttpLogger.js   ==》请求日志
       5.业务请求 请求函数 `import http from '../../lib/network/index'; ` 路径： `import { URL_CODE } from '../../config/Urls'` 

*** 
### 零散的项目要点
1. RN代码是以bundle包的形式加载的,可以只更新资源包，不需要重新发包
2. 全局变量和状态管理 引入：
 - （1）global:global.appConf引入了AppConfig
 - （2）mobx的Provider 'app\stores\index.js' ==》全局各种类集中引入
              
3. app\modules\widgetContainer文件夹的 app\modules\widgetContainer\WidgetContainer.js
 写了一个通过的组件容器预设置了一些参数

*** 

APPJS
一. DeviceEventEmitter 添加监听  挺重要的，通讯用的,项目主要用于监听登录状态多些

二. StyleSheet

三. RCTLog 这个不知道干嘛的 待定

四.Provider - mobx-react 引入全局状态管理的
五.app\lib\storage\StorageEntry.js 本地存储重写的类 StorageEntry
问题：AsyncStorage，已经有了StorageEntry 为什么有些是用asyncstorage进行存取
六. config文件夹
1. indexjs文件 这个文件是重写初始化rn部分组件样式与基础配置的
2. TouchableOpacity 被重写了防抖 在400ms以内 
3. react-native-iphone-x-helper =》 适配iphonex的方案
4. ScreenConfig getUIPt 是UI的适配方案 =》设计稿与实际开发的
5. AppConfig 部分APP配置重写有网络，网络类型，
       ***  DeviceEventEmitter.emit 通知登录情况 
       *** 渠道标识优先看YMSHOPSDK的渠道标识没有再看    platform的，ym的渠道还有冰箱
   

6. urls.js 所有的接口都写在这个文件


***

### 原生与RN的交互SDK  
-  通过NativeModule的YMShopSDK引入
-  主路由及其跳转管理RouterMapper(有原生，有自定义，有rn的，打开纯RN页面，使用native或者flux的Actions跳转；)
-  页面跳转或者打开容器的回调方法，放在监听回调中，等待登录状态更新后再触发；
-  项目基础base包（native_modules文件夹，ym-base，ym-http和ym-native-base）

### 写代码关键内容
1.WidgetContainer使用了wrapWidget方法创建了高阶组件，通过inject（XXX）（observer（class XXX extends XXX））方法全局注入公共store；
2.wrapWidget方法内部统一为组件item处理了外容器的背景色等，根据是否需要渲染组件来控制调用super.render（）或者return 空View；
3.WidgetContainer是最为核心的组件之一，具备功用性；内部通过外部props渲染各种配置的item组件（通过wrapWidget包裹），包含刷新头header；
4.思想是由外部数据控制渲染；
5.核心组件大多导出同时都有使用es6和commonJS导出，保证兼容性；


